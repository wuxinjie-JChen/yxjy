<meta charset="utf-8">
<style>
table#show_sc{
	height:1000px;
}
</style>
<div style="margin-top:20px;width:100%">
       	<select class="easyui-combobox scstate" name="sstate" labelPosition="top" style="width:100px;"
           data-options="limitToList:true">
           		<option value="">考勤状态</option>
                <option value="0">未开课</option>
                <option value="1">未到</option>
                <option value="2">已到</option>
                <option value="3">请假</option>
        </select>
       <label>课程名称：</label><input class="namec" class="easyui-validatebox">
        <label>教师名称：</label><input class="namet" class="easyui-validatebox">
         <label>学生名称：</label><input class="names" class="easyui-validatebox">
		<a class="easyui-linkbutton" href="javascript:doSearchSc()">查询</a>
</div>
<table id="show_sc" style="height:520px;width:100%"></table> 
<script type="text/javascript">
//加载表格
$('#show_sc').datagrid({
    url:'../course.do?op=findSc',
    
    pageList:[3,6,9],
    pageSize:6,
    pagination:true,//分页的工具栏
    columns:[[
		{field:'scid',title:'上课编号',width:'9%'},
		{field:'sname',title:'学生名称',width:'9%'},
		{field:'tname',title:'教师名称',width:'9%'},
		{field:'cid',title:'课程编号',width:'9%'},
        {field:'cname',title:'课程名称',width:'9%'},
        {field:'ctype',title:'课程类型',width:'9%'},
        {field:'scdaytime',title:'课程时间',width:'9%'},
        {field:'scqtime',title:'具体时间',width:'9%',
        	formatter: function(value,row,index){
        		if(value==1){
        			return '8.00-10.00';
        		}else if(value==2){
        			return '10.20-12.20';
        		}else if(value==3){
        			return '14.00-16.00';
        		}else if(value==4){
        			return '16.20-18.20';
        		}
		}},
        {field:'scstate',title:'考勤状态',width:'9%',
			formatter: function(value,row,index){
				if(value==0){
        			return '未开课';
        		}else if(value==1){
        			return '未到';
        		}else if(value==2){
        			return '已到';
        		}else if(value==3){
        			return '请假';
        		}
		}},
        {field:'aa',title:'操作',width:'10%',
			formatter: function(value,row,index){
				return '<a href="javascript:deletes('+row.scid+')">删除</a>';
		}}
    ]],
    
});


//根据条件查看
function doSearchSc(){
	//获取名称
	var sname=$('.names').val();
	var namet=$('.namet').val();
	var namec=$('.namec').val();
	var scstate=$('.scstate').val();
	$('#show_sc').datagrid('load', {
		sname:sname,
		tname:namet,
		cname:namec,
		scstate:scstate
	});
}

//删除
function deletes(scid){
	$.post("../course.do",{op:'delete',scid:scid},function(data){
		if(data==1){
			var tab = $('#show_center').tabs('getSelected');  // 获取选择的面板
			tab.panel('refresh', 'showCourse.html');
		}else{
			alert('删除失败');
		}
	});
	
}
   